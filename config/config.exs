import Config

if config_env() == :test do
  config :sentry,
    environment_name: :test,
    tags: %{},
    enable_source_code_context: true,
    root_source_code_paths: [File.cwd!()],
    finch_opts: [recv_timeout: 50],
    send_result: :sync,
    send_max_attempts: 1,
    dedup_events: false,
    test_mode: true

  config :logger, backends: []
end

config :phoenix, :json_library, if(Code.ensure_loaded?(JSON), do: JSON, else: Jason)

config :sentry,
  client: Sentry.FinchClient
